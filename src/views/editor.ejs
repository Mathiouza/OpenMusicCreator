<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
		<link rel="stylesheet" href="style.css" />
        <title>Editor - OpenMusicCreator</title>
    </head>
 
    <body>
		<div id="instru1" class="divInstru">
			<h1 class="titreInstru">Sine</h1>
			<div class="lineP">
				<img src="touche.png" class="touche" tone="A" oct=-1 />
				<img src="touche.png" class="touche" tone="Bb" oct=-1 />
				<img src="touche.png" class="touche" tone="B" oct=-1 />
				<img src="touche.png" class="touche main" tone="C" oct=0 />
				<img src="touche.png" class="touche" tone="C#" oct=0 />
				<img src="touche.png" class="touche" tone="D" oct=0 />
			</div>
			<div class="lineI">
				<img src="touche.png" class="touche" tone="D" oct=0 />
				<img src="touche.png" class="touche" tone="Eb" oct=0 />
				<img src="touche.png" class="touche main" tone="E" oct=0 />
				<img src="touche.png" class="touche" tone="F" oct=0 />
				<img src="touche.png" class="touche" tone="F#" oct=0 />
			</div>
			<div class="lineP">
				<img src="touche.png" class="touche" tone="E" oct=0 />
				<img src="touche.png" class="touche" tone="F" oct=0 />
				<img src="touche.png" class="touche" tone="Gb" oct=0 />
				<img src="touche.png" class="touche main" tone="G" oct=0 />
				<img src="touche.png" class="touche" tone="G#" oct=0 />
				<img src="touche.png" class="touche" tone="A" oct=0 />
			</div>
			<div class="lineI">
				<img src="touche.png" class="touche" tone="G" oct=0 />
				<img src="touche.png" class="touche" tone="Ab" oct=0 />
				<img src="touche.png" class="touche main" tone="A" oct=0 />
				<img src="touche.png" class="touche" tone="A#" oct=0 />
				<img src="touche.png" class="touche" tone="B" oct=0 />
			</div>
			<div class="lineP">
				<img src="touche.png" class="touche" tone="A" oct=0 />
				<img src="touche.png" class="touche" tone="Bb" oct=0 />
				<img src="touche.png" class="touche" tone="B" oct=0 />
				<img src="touche.png" class="touche main" tone="C" oct=1 />
				<img src="touche.png" class="touche" tone="C#" oct=1 />
				<img src="touche.png" class="touche" tone="D" oct=1 />
			</div>
			<div class="lineI">
				<img src="touche.png" class="touche" tone="D" oct=1 />
				<img src="touche.png" class="touche" tone="Eb" oct=1 />
				<img src="touche.png" class="touche main" tone="E" oct=1 />
				<img src="touche.png" class="touche" tone="F" oct=1 />
				<img src="touche.png" class="touche" tone="F#" oct=1 />
			</div>
		</div>
		<div id="instru2" class="divInstru">
			<h1 class="titreInstru">Sawtooth</h1>
			<div class="lineP">
				<img src="touche.png" class="touche" tone="A" oct=-1 />
				<img src="touche.png" class="touche" tone="Bb" oct=-1 />
				<img src="touche.png" class="touche" tone="B" oct=-1 />
				<img src="touche.png" class="touche main" tone="C" oct=0 />
				<img src="touche.png" class="touche" tone="C#" oct=0 />
				<img src="touche.png" class="touche" tone="D" oct=0 />
			</div>
			<div class="lineI">
				<img src="touche.png" class="touche" tone="Db" oct=0 />
				<img src="touche.png" class="touche" tone="D" oct=0 />
				<img src="touche.png" class="touche" tone="Eb" oct=0 />
				<img src="touche.png" class="touche main" tone="E" oct=0 />
				<img src="touche.png" class="touche" tone="F" oct=0 />
				<img src="touche.png" class="touche" tone="F#" oct=0 />
				<img src="touche.png" class="touche" tone="G" oct=0 />
			</div>
			<div class="lineP">
				<img src="touche.png" class="touche" tone="E" oct=0 />
				<img src="touche.png" class="touche" tone="F" oct=0 />
				<img src="touche.png" class="touche" tone="Gb" oct=0 />
				<img src="touche.png" class="touche main" tone="G" oct=0 />
				<img src="touche.png" class="touche" tone="G#" oct=0 />
				<img src="touche.png" class="touche" tone="A" oct=0 />
			</div>
			<div class="lineI">
				<img src="touche.png" class="touche" tone="Gb" oct=0 />
				<img src="touche.png" class="touche" tone="G" oct=0 />
				<img src="touche.png" class="touche" tone="Ab" oct=0 />
				<img src="touche.png" class="touche main" tone="A" oct=0 />
				<img src="touche.png" class="touche" tone="A#" oct=0 />
				<img src="touche.png" class="touche" tone="B" oct=0 />
				<img src="touche.png" class="touche" tone="C" oct=1 />
			</div>
			<div class="lineP">
				<img src="touche.png" class="touche" tone="A" oct=0 />
				<img src="touche.png" class="touche" tone="Bb" oct=0 />
				<img src="touche.png" class="touche" tone="B" oct=0 />
				<img src="touche.png" class="touche main" tone="C" oct=1 />
				<img src="touche.png" class="touche" tone="C#" oct=1 />
				<img src="touche.png" class="touche" tone="D" oct=1 />
			</div>
			<div class="lineI">
				<img src="touche.png" class="touche" tone="Db" oct=1 />
				<img src="touche.png" class="touche" tone="D" oct=1 />
				<img src="touche.png" class="touche" tone="Eb" oct=1 />
				<img src="touche.png" class="touche main" tone="E" oct=1 />
				<img src="touche.png" class="touche" tone="F" oct=1 />
				<img src="touche.png" class="touche" tone="F#" oct=1 />
				<img src="touche.png" class="touche" tone="G" oct=1 />
			</div>
		</div>
		<div id="instru3" class="divInstru">
			<h1 class="titreInstru">Triangle</h1>
			<div class="lineP">
				<img src="touche.png" class="touche" tone="A" oct=-1 />
				<img src="touche.png" class="touche" tone="Bb" oct=-1 />
				<img src="touche.png" class="touche" tone="B" oct=-1 />
				<img src="touche.png" class="touche main" tone="C" oct=0 />
				<img src="touche.png" class="touche" tone="C#" oct=0 />
				<img src="touche.png" class="touche" tone="D" oct=0 />
			</div>
			<div class="lineI">
				<img src="touche.png" class="touche" tone="D" oct=0 />
				<img src="touche.png" class="touche" tone="Eb" oct=0 />
				<img src="touche.png" class="touche main" tone="E" oct=0 />
				<img src="touche.png" class="touche" tone="F" oct=0 />
				<img src="touche.png" class="touche" tone="F#" oct=0 />
			</div>
			<div class="lineP">
				<img src="touche.png" class="touche" tone="E" oct=0 />
				<img src="touche.png" class="touche" tone="F" oct=0 />
				<img src="touche.png" class="touche" tone="Gb" oct=0 />
				<img src="touche.png" class="touche main" tone="G" oct=0 />
				<img src="touche.png" class="touche" tone="G#" oct=0 />
				<img src="touche.png" class="touche" tone="A" oct=0 />
			</div>
			<div class="lineI">
				<img src="touche.png" class="touche" tone="G" oct=0 />
				<img src="touche.png" class="touche" tone="Ab" oct=0 />
				<img src="touche.png" class="touche main" tone="A" oct=0 />
				<img src="touche.png" class="touche" tone="A#" oct=0 />
				<img src="touche.png" class="touche" tone="B" oct=0 />
			</div>
			<div class="lineP">
				<img src="touche.png" class="touche" tone="A" oct=0 />
				<img src="touche.png" class="touche" tone="Bb" oct=0 />
				<img src="touche.png" class="touche" tone="B" oct=0 />
				<img src="touche.png" class="touche main" tone="C" oct=1 />
				<img src="touche.png" class="touche" tone="C#" oct=1 />
				<img src="touche.png" class="touche" tone="D" oct=1 />
			</div>
			<div class="lineI">
				<img src="touche.png" class="touche" tone="D" oct=1 />
				<img src="touche.png" class="touche" tone="Eb" oct=1 />
				<img src="touche.png" class="touche main" tone="E" oct=1 />
				<img src="touche.png" class="touche" tone="F" oct=1 />
				<img src="touche.png" class="touche" tone="F#" oct=1 />
			</div>
		</div>
		
		<script src="wad.js"></script>
		<script>
			var octave = 3;
		
			var mouseDown = 0;
			document.body.onmousedown = function() { 
			  ++mouseDown;
			}
			document.body.onmouseup = function() {
			  --mouseDown;
			}
		
			var el = document.querySelectorAll('img');
			for (var i = 0 ; i < el.length ; i++) {
				el[i].addEventListener('mousedown', function(e){
					e.preventDefault();
				}, false);
				el[i].addEventListener('mousemove', function(e){
					e.preventDefault();
				}, false);
			}
			var instru = document.querySelectorAll('.touche');
			for(var i = 0 ; i < instru.length ; i++) {
				instru[i].addEventListener('mouseover', function(e) {
					var value = 0, instru = 'sine';
					if(e.currentTarget.parentNode.parentNode.getAttribute('id') == 'instru2') { value = 120; instru = 'sawtooth'; }
					else if(e.currentTarget.parentNode.parentNode.getAttribute('id') == 'instru3') { value = 240; instru = 'triangle'; }
					if(e.currentTarget.getAttribute('class') == 'touche main') value -= 60;
					e.currentTarget.setAttribute('style', 'filter: sepia() saturate(1000%) hue-rotate('+value+'deg)');
					if(mouseDown) {
						e.currentTarget.setAttribute('style', 'filter: sepia() saturate(20%) hue-rotate('+value+'deg)');
						
						new Wad({
							source : instru,
							volume : 1.0, // Peak volume can range from 0 to an arbitrarily high number, but you probably shouldn't set it higher than 1.
							pitch : e.currentTarget.getAttribute('tone')+(parseInt(e.currentTarget.getAttribute('oct'))+octave), // Set a default pitch on the constuctor if you don't want to set the pitch on play().
							panning : 0, // Horizontal placement of the sound source. Sensible values are from 10 to -10.
							env : { // This is the ADSR envelope.
								attack : 0.0, // Time in seconds from onset to peak volume.  Common values for oscillators may range from 0.05 to 0.3.
								decay : 0.0, // Time in seconds from peak volume to sustain volume.
								sustain : 1, // Sustain volume level. This is a percent of the peak volume, so sensible values are between 0 and 1.
								hold : 0.4, // Time in seconds to maintain the sustain volume level. If this is not set to a lower value, oscillators must be manually stopped by calling their stop() method.
								release : 0 // Time in seconds from the end of the hold period to zero volume, or from calling stop() to zero volume.
							},
						}).play({label:e.currentTarget.getAttribute('tone')+(parseInt(e.currentTarget.getAttribute('oct'))+octave)});
					}
				});
				instru[i].addEventListener('mousedown', function(e) {
					var value = 0, instru = 'sine';
					if(e.currentTarget.parentNode.parentNode.getAttribute('id') == 'instru2') { value = 120; instru = 'sawtooth'; }
					else if(e.currentTarget.parentNode.parentNode.getAttribute('id') == 'instru3') { value = 240; instru = 'triangle'; }
					if(e.currentTarget.getAttribute('class') == 'touche main') value -= 60;
					e.currentTarget.setAttribute('style', 'filter: sepia() saturate(20%) hue-rotate('+value+'deg)');
					
					new Wad({
						source : instru,
						volume : 1.0, // Peak volume can range from 0 to an arbitrarily high number, but you probably shouldn't set it higher than 1.
						pitch : e.currentTarget.getAttribute('tone')+(parseInt(e.currentTarget.getAttribute('oct'))+octave), // Set a default pitch on the constuctor if you don't want to set the pitch on play().
						panning : 0, // Horizontal placement of the sound source. Sensible values are from 10 to -10.
						env : { // This is the ADSR envelope.
							attack : 0.0, // Time in seconds from onset to peak volume.  Common values for oscillators may range from 0.05 to 0.3.
							decay : 0.0, // Time in seconds from peak volume to sustain volume.
							sustain : 1.0, // Sustain volume level. This is a percent of the peak volume, so sensible values are between 0 and 1.
							hold : 0.4, // Time in seconds to maintain the sustain volume level. If this is not set to a lower value, oscillators must be manually stopped by calling their stop() method.
							release : 0 // Time in seconds from the end of the hold period to zero volume, or from calling stop() to zero volume.
						},
					}).play({label:e.currentTarget.getAttribute('tone')+(parseInt(e.currentTarget.getAttribute('oct'))+octave)});
				});
				instru[i].addEventListener('mouseup', function(e) {
					var value = 0;
					if(e.currentTarget.parentNode.parentNode.getAttribute('id') == 'instru2') value = 120;
					else if(e.currentTarget.parentNode.parentNode.getAttribute('id') == 'instru3') value = 240;
					if(e.currentTarget.getAttribute('class') == 'touche main') value -= 60;
					e.currentTarget.setAttribute('style', 'filter: sepia() saturate(1000%) hue-rotate('+value+'deg)');
				});
				instru[i].addEventListener('mouseout', function(e) {
					var value = 0;
					if(e.currentTarget.parentNode.parentNode.getAttribute('id') == 'instru2') value = 120;
					else if(e.currentTarget.parentNode.parentNode.getAttribute('id') == 'instru3') value = 240;
					if(e.currentTarget.getAttribute('class') == 'touche main') value -= 60;
					e.currentTarget.setAttribute('style', 'filter: sepia() saturate(100000%) hue-rotate('+value+'deg)');
				});
			}
			
			
		</script>
    </body>
</html>